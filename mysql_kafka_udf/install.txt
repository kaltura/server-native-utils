apt-get install g++ gcc git zlib1g-dev make libmysqlclient-dev
 
mkdir /opt/kaltura
cd /opt/kaltura
git clone https://github.com/kaltura/server-native-utils
cd server-native-utils/mysql_kafka_udf/
 
git clone https://github.com/edenhill/librdkafka
cd librdkafka/
./configure
make install
 
gcc -shared -o mysql_kafka_udf.so mysql_kafka_udf.c hash.c -I/usr/include/mysql/ -fPIC /usr/local/lib/librdkafka.a
cp mysql_kafka_udf.so /usr/lib/mysql/plugin/
mysql < sql/install_functions.sql
